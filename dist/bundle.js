!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["dot-audio"]=t():e["dot-audio"]=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.r(t),e.d(t,{BufferSource:()=>_r,ChannelMerger:()=>Fe,ChannelSplitter:()=>Be,Chorus:()=>fn,Compressor:()=>Ke,ConstantSource:()=>y,Convolver:()=>nt,Delay:()=>pt,Distortion:()=>dn,EQ2:()=>Gn,Envelope:()=>j,FMSynth:()=>go,FeedbackDelay:()=>Un,Filter:()=>J,FilterEnvelope:()=>ue,Flanger:()=>Jn,Gain:()=>ge,GainEnvelope:()=>_e,Keyboard:()=>vc,LFO:()=>Yt,Limiter:()=>ur,MonoSynth:()=>Mo,NoiseGenerator:()=>xr,Note:()=>Pc,Osc:()=>oo,Oscillator:()=>Qt,PingPongDelay:()=>gr,PolySynth:()=>Vo,Reverb:()=>Hr,SignalGenerator:()=>yc,SimpleFMSynth:()=>rc,StereoPanner:()=>wt,Synth:()=>Ao,WaveShaper:()=>qt,chain:()=>G,getNoteFrequency:()=>U,midiToNote:()=>x,noteToMidi:()=>N,parseNote:()=>B});const r=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getName=function(){return r.name},this.getParams=function(){return r.params},this.getInputs=function(){return r.inputs},this.getOutputs=function(){return r.outputs},this.connect=function(e,t,n){return r._connect(e,t,n)},this.disconnect=function(e,t,n){return r._disconnect(e,t,n)},this._connect=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(t))t.forEach((function(e){return r.connect(e)}));else if(t instanceof e){if(!t.getInputs())return void console.error("Cannot connect to a node with no inputs");var c=t._getInputNodes();c.forEach((function(e){r.getOutputs().forEach((function(t){return t.connect(e,n,o)}))}))}else t instanceof AudioNode?r.getOutputs().forEach((function(e){return e.connect(t,n,o)})):t instanceof AudioParam?r.getOutputs().forEach((function(e){return e.connect(t)})):console.error("Invalid destination type");return r},this._disconnect=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(Array.isArray(t))t.forEach((function(e){return r.disconnect(e)}));else if(t instanceof e){if(!t.getInputs())return void console.error("Cannot disconnect from destination provided");var c=t._getInputNodes();c.forEach((function(e){r.getOutputs().forEach((function(t){return t.disconnect(e,n,o)}))}))}else t instanceof AudioNode?r.getOutputs().forEach((function(e){return e.disconnect(t,n,o)})):r.getOutputs().forEach((function(e){return e.disconnect(t)}));return r},this._getInputNodes=function(){return r.getInputs().reduce((function(t,r){return r instanceof e?t.push.apply(t,function(e){if(Array.isArray(e))return n(e)}(o=r._getInputNodes())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t.push(r),t;var o}),[])},this._update=function(e,t){return e.setValueAtTime(t,r.AC.currentTime)},this._timeUpdate=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n?e.setTargetAtTime(t,r.AC.currentTime,n):e.setValueAtTime(t,r.AC.currentTime)},this._linearFadeUpdate=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r._timeUpdate(e,1-n,o),r._timeUpdate(t,n,o)},this._equalPowerFadeUpdate=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r._timeUpdate(e,Math.cos(.5*n*Math.PI),o),r._timeUpdate(t,Math.cos(.5*(1-n)*Math.PI),o)},this._dryWetUpdate=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n<.5?(r._timeUpdate(e,1,o),r._timeUpdate(t,2*n,o)):(r._timeUpdate(e,1-2*(n-.5),o),r._timeUpdate(t,1,o))},this.AC=t,this.name="DotAudioNode"};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p={offset:1,start:!1};const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,o),(t=r.call(this,e)).start=function(){return t.source.start()},t.stop=function(){return t.source.stop()},t.getOffset=function(){return t.params.offset},t.setOffset=function(e,n){return t._timeUpdate(t.params.offset,e,n)},t.name="ConstantSource",t.source=t.AC.createConstantSource(),t.params={offset:t.source.offset},t.inputs=null,t.outputs=[t.source];var c=u(u({},p),n);return t.setOffset(c.offset),c.start&&t.start(),t}return o}(r);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w={attack:0,decay:0,sustain:1,release:0,modifier:1};const j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=P(t);if(n){var o=P(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return d(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O(this,o),(t=r.call(this,e)).getAttack=function(){return t.attack},t.getDecay=function(){return t.decay},t.getSustain=function(){return t.sustain},t.getRelease=function(){return t.release},t.getModifier=function(){return t.modifier},t.setAttack=function(e){return t.attack=e},t.setDecay=function(e){return t.decay=e},t.setSustain=function(e){return t.sustain=e},t.setRelease=function(e){return t.release=e},t.setModifier=function(e){return t.modifier=e},t.connect=function(e){!e instanceof AudioParam?console.error("Envelopes must be connected to an AudioParam"):t._connect(e)},t.triggerAttack=function(){t._clearTimeouts();var e=t.sustain*t.modifier;if(t.attack){t.source.setOffset(0),t.source.setOffset(t.modifier,t.attack);var n=setTimeout((function(){t.source.setOffset(e,t.decay)}),1e3*t.attack);t.timeoutIds.push(n)}else t.decay?(t.source.setOffset(t.modifier),t.source.setOffset(e,t.decay)):t.sustain&&t.source.setOffset(e)},t.triggerRelease=function(){t._clearTimeouts(),t.source.setOffset(0,t.release)},t.triggerStop=function(){t._clearTimeouts(),t.source.setOffset(0)},t._clearTimeouts=function(){return t.timeoutIds.forEach((function(e){return clearTimeout(e)}))},t.name="Envelope",t.source=new y(t.AC,{start:!0}),t.timeoutIds=[],t.attack=0,t.decay=0,t.sustain=1,t.release=0,t.modifier=1,t.params={},t.inputs=null,t.outputs=[t.source];var c=g(g({},w),n);return t.setAttack(c.attack),t.setDecay(c.decay),t.setSustain(c.sustain),t.setRelease(c.release),t.setModifier(c.modifier),t.source.setOffset(0),t}return o}(r);var D=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],S=["none","2x","4x"],_=["white","pink","brown"],A=["sine","triangle","square","sawtooth"],R=["lowpass","highpass","bandpass","allpass","notch","peaking","lowshelf","highshelf"],E=function(e,t,n){return Math.min(n,Math.max(t,e))},G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t.length<2))for(var r=0;r<t.length-1;r++)t[r].connect(t[r+1])},F={12:"C",13:"C#",14:"D",15:"D#",16:"E",17:"F",18:"F#",19:"G",20:"G#",21:"A",22:"A#",23:"B"},q={C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88},T={a:12,w:13,s:14,e:15,d:16,f:17,t:18,g:19,y:20,h:21,u:22,j:23,k:24,o:25,l:26,p:27,";":28},C=/^(?![ebEB]#)([a-gA-G]#?)([0-9])$/,k=function(e){var t=e.match(C);if(t)return{note:t[1].toUpperCase(),octave:parseInt(t[2])}},B=function(e){var t=k(e);if(t)return{fullNote:"".concat(t.note).concat(t.octave),note:t.note,octave:t.octave,frequency:U(e),midi:N(e)}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=T[e]+12*t;return B(x(n))},x=function(e){for(var t=E(e,12,120),n=0;t>23;)t-=12,n++;return"".concat(F[t]).concat(n)},N=function(e){var t=k(e);return t?D.indexOf(t.note)+12*(t.octave+1):null},U=function(e){var t=k(e);return t?q[t.note]*Math.pow(2,t.octave-4):null};function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $={frequency:11e3,q:0,detune:0,gain:0,type:"lowpass"};const J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=H(t);if(n){var o=H(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return V(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};z(this,o),(t=r.call(this,e)).getFrequency=function(){return t.params.frequency.value},t.getQ=function(){return t.params.Q.value},t.getGain=function(){return t.params.gain.value},t.getDetune=function(){return t.params.detune.value},t.getType=function(){return t.filter.type},t.setFrequency=function(e,n){return t._timeUpdate(t.params.frequency,e,n)},t.setQ=function(e,n){return t._timeUpdate(t.params.frequency,e,n)},t.setGain=function(e,n){return t._timeUpdate(t.params.gain,e,n)},t.setDetune=function(e,n){return t._timeUpdate(t.params.detune,e,n)},t.setType=function(e){R.includes(e)&&(t.filter.type=e)},t.name="Filter",t.filter=t.AC.createBiquadFilter(),t.params={frequency:t.filter.frequency,q:t.filter.q,gain:t.filter.gain,detune:t.filter.detune},t.inputs=[t.filter],t.outputs=[t.filter];var c=I(I({},$),n);return t.setFrequency(c.frequency),t.setQ(c.q),t.setGain(c.gain),t.setDetune(c.detune),t.setType(c.type),t}return o}(r);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce={frequency:2e3,q:0,detune:0,gain:0,type:"lowpass"};const ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=oe(t);if(n){var o=oe(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return re(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};te(this,o),(t=r.call(this,e,n)).getFrequency=function(){return t.params.frequency.value},t.getQ=function(){return t.params.q.value},t.getDetune=function(){return t.params.detune.value},t.getGain=function(){return t.params.gain.value},t.getType=function(){return t.filter.getType()},t.setFrequency=function(e,n){return t.filter.setFrequency(e,n)},t.setQ=function(e,n){return t.filter.setQ(e,n)},t.setDetune=function(e,n){return t.filter.setDetune(e,n)},t.setGain=function(e,n){return t.filter.setGain(e,n)},t.setType=function(e){return t.filter.setType(e)},t.name="FilterEnvelope",t.filter=new J(t.AC),t.params={frequency:t.filter.getParams().frequency,detune:t.filter.getParams().detune,q:t.filter.getParams().q,gain:t.filter.getParams().gain},t.inputs=[t.filter],t.outputs=[t.filter];var c=Z(Z({},ce),n);return t.setFrequency(c.frequency),t.setQ(c.q),t.setDetune(c.detune),t.setGain(c.gain),t.setType(c.type),t.source.connect(t.filter.getParams().frequency),t}return o}(j);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me={gain:1};const ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=be(t);if(n){var o=be(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ye(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};le(this,o),(t=r.call(this,e)).getGain=function(){return t.params.gain.value},t.setGain=function(e,n){return t._timeUpdate(t.params.gain,e,n)},t.name="Gain",t.gain=t.AC.createGain(),t.params={gain:t.gain.gain},t.inputs=[t.gain],t.outputs=[t.gain];var c=fe(fe({},me),n);return t.setGain(c.gain),t}return o}(r);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se={gain:0};const _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=De(t);if(n){var o=De(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return je(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pe(this,o),(t=r.call(this,e,n)).getGain=function(){return t.params.gain.value},t.setGain=function(e,n){return t.gain.setGain(e,n)},t.name="GainEnvelope",t.gain=new ge(t.AC),t.params={gain:t.gain.getParams().gain},t.inputs=[t.gain],t.outputs=[t.gain];var c=ve(ve({},Se),n);return t.setGain(c.gain),t.source.connect(t.gain.getParams().gain),t}return o}(j);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ge(t);if(n){var o=Ge(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Ee(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).name="ChannelMerger",t.channelMerger=t.AC.createChannelMerger(2),t.params={},t.inputs=[t.channelMerger],t.outputs=[t.channelMerger],t}return o}(r);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ke(t);if(n){var o=ke(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Ce(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).name="ChannelSplitter",t.channelSplitter=t.AC.createChannelSplitter(2),t.params={},t.inputs=[t.channelSplitter],t.outputs=[t.channelSplitter],t}return o}(r);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ie(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze={threshold:-24,ratio:12,knee:30,attack:.003,release:.25};const Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=We(t);if(n){var o=We(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Ie(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Le(this,o),(t=r.call(this,e)).getThreshold=function(){return t.params.threshold.value},t.getRatio=function(){return t.params.ratio.value},t.getKnee=function(){return t.params.knee.value},t.getAttack=function(){return t.params.attack.value},t.getRelease=function(){return t.params.release.value},t.getReduction=function(){return t.compressor.reduction},t.setThreshold=function(e,n){return t._timeUpdate(t.params.threshold,e,n)},t.setRatio=function(e,n){return t._timeUpdate(t.params.ratio,e,n)},t.setKnee=function(e,n){return t._timeUpdate(t.params.knee,e,n)},t.setAttack=function(e,n){return t._timeUpdate(t.params.attack,e,n)},t.setRelease=function(e,n){return t._timeUpdate(t.params.release,e,n)},t.name="Compressor",t.compressor=t.AC.createDynamicsCompressor(),t.params={threshold:t.compressor.threshold,ratio:t.compressor.ratio,knee:t.compressor.knee,attack:t.compressor.attack,release:t.compressor.release},t.inputs=[t.compressor],t.outputs=[t.compressor];var c=Ne(Ne({},ze),n);return t.setThreshold(c.threshold),t.setRatio(c.ratio),t.setKnee(c.knee),t.setAttack(c.attack),t.setRelease(c.release),t}return o}(r);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var tt={buffer:null,normalize:!1};const nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=et(t);if(n){var o=et(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Ze(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xe(this,o),(t=r.call(this,e)).getBuffer=function(){return t.convolver.buffer},t.getNormalize=function(){return t.convolver.normalize},t.setBuffer=function(e){return t.convolver.buffer=e},t.setNormalize=function(e){return t.convolver.normalize=e},t.name="Convolver",t.convolver=t.AC.createConvolver(),t.params={},t.inputs=[t.convolver],t.outputs=[t.convolver];var c=$e($e({},tt),n);return t.setBuffer(c.buffer),t.setNormalize(c.normalize),t}return o}(r);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lt={delayTime:0};const pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=st(t);if(n){var o=st(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ft(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};it(this,o),(t=r.call(this,e)).getDelayTime=function(){return t.params.delayTime.value},t.setDelayTime=function(e,n){return t._timeUpdate(t.params.delayTime,e,n)},t.name="Delay",t.delay=t.AC.createDelay(),t.params={delayTime:t.delay.delayTime},t.inputs=[t.delay],t.outputs=[t.delay];var c=ct(ct({},lt),n);return t.setDelayTime(c.delayTime),t}return o}(r);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt={pan:0};const wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=dt(t);if(n){var o=dt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return vt(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ht(this,o),(t=r.call(this,e)).getPan=function(){return t.params.pan.value},t.setPan=function(e,n){return t._timeUpdate(t.params.pan,e,n)},t.name="StereoPanner",t.panner=t.AC.createStereoPanner(),t.params={pan:t.panner.pan},t.inputs=[t.panner],t.outputs=[t.panner];var c=mt(mt({},Pt),n);return t.setPan(c.pan),t}return o}(r);function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e,t){return!t||"object"!==jt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft={curve:null,oversample:"none"};const qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Gt(t);if(n){var o=Gt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Et(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};At(this,o),(t=r.call(this,e)).getCurve=function(){return t.waveShaper.curve},t.getOversample=function(){return t.waveShaper.oversample},t.setCurve=function(e){return t.waveShaper.curve=e},t.setOversample=function(e){S.includes(e)&&(t.waveShaper.oversample=e)},t.name="WaveShaper",t.waveShaper=t.AC.createWaveShaper(),t.params={},t.inputs=[t.waveShaper],t.outputs=[t.waveShaper];var c=St(St({},Ft),n);return t.setCurve(c.curve),t.setOversample(c.oversample),t}return o}(r);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lt={type:"sine",frequency:440,detune:0,start:!1};const Qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ut(t);if(n){var o=Ut(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Nt(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Mt(this,o),(t=r.call(this,e)).start=function(){return t.osc.start()},t.stop=function(){return t.osc.stop()},t.getFrequency=function(){return t.params.frequency.value},t.getDetune=function(){return t.params.detune.value},t.getWaveform=function(){return t.getType()},t.getType=function(){return t.osc.type},t.setFrequency=function(e,n){return t._timeUpdate(t.params.frequency,e,n)},t.setDetune=function(e,n){return t._timeUpdate(t.params.detune,e,n)},t.setWaveform=function(e){return t.setType(e)},t.setType=function(e){A.includes(e)&&(t.osc.type=e)},t.name="Oscillator",t.osc=t.AC.createOscillator(),t.params={frequency:t.osc.frequency,detune:t.osc.detune},t.inputs=null,t.outputs=[t.osc];var c=kt(kt({},Lt),n);return t.setType(c.type),t.setFrequency(c.frequency),t.setDetune(c.detune),c.start&&t.start(),t}return o}(r);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt={rate:1,depth:1,detune:0,type:"sine",start:!1};const Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Jt(t);if(n){var o=Jt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return $t(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vt(this,o),(t=r.call(this,e)).start=function(){return t.osc.start()},t.stop=function(){return t.osc.stop()},t.getRate=function(){return t.params.rate.value},t.getDetune=function(){return t.params.detune.value},t.getDepth=function(){return t.params.depth.value},t.getType=function(){return t.osc.getType()},t.setRate=function(e,n){return t.osc.setFrequency(E(e,0,100),n)},t.setDetune=function(e,n){return t.osc.setDetune(e,n)},t.setDepth=function(e,n){return t.depth.setGain(e,n)},t.setType=function(e){return t.osc.setType(e)},t.name="LFO",t.depth=new ge(t.AC),t.osc=new Qt(t.AC),t.params={rate:t.osc.getParams().frequency,detune:t.osc.getParams().detune,depth:t.depth.getParams().gain},t.inputs=null,t.outputs=[t.depth];var c=zt(zt({},Xt),n);return t.setRate(c.rate),t.setDepth(c.depth),t.setDetune(c.detune),t.setType(c.type),t.osc.connect(t.depth),c.start&&t.start(),t}return o}(r);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an={amount:0,delayTime:.04,depth:.005,rate:.25,feedback:.4};const fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=un(t);if(n){var o=un(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return cn(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rn(this,o),(t=r.call(this,e)).getAmount=function(){return t.wetGain.getGain()},t.getDelayTime=function(){return t.leftDelay.getDelayTime()},t.getFeedback=function(){return t.params.feedback.value},t.getRate=function(){return t.leftLFO.getRate()},t.getDepth=function(){return t.leftLFO.getDepth()},t.setAmount=function(e,n){t._linearFadeUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setFeedback=function(e,n){return t.feedback.setGain(e,n)},t.setRate=function(e,n){t.leftLFO.setRate(e,n),t.rightLFO.setRate(2*e,n)},t.setDepth=function(e,n){t.leftLFO.setDepth(e,n),t.rightLFO.setDepth(e,n)},t.setDelayTime=function(e,n){t.leftDelay.setDelayTime(e,n),t.rightDelay.setDelayTime(e,n)},t.name="Chorus",t.dryGain=new ge(t.AC),t.leftLFO=new Yt(t.AC,{start:!0}),t.rightLFO=new Yt(t.AC,{start:!0}),t.chorusGain=new ge(t.AC,{gain:.6}),t.leftDelay=new pt(t.AC),t.rightDelay=new pt(t.AC),t.channelMerger=new Fe(t.AC),t.feedback=new ge(t.AC),t.wetGain=new ge(t.AC),t.params={delayTime:[t.leftDelay.getParams().delayTime,t.rightDelay.getParams().delayTime],feedback:t.feedback.getParams().gain,rate:[t.leftLFO.getParams().rate,t.rightLFO.getParams().rate],depth:[t.leftLFO.getParams().depth,t.rightLFO.getParams().depth]},t.inputs=[t.dryGain,t.chorusGain],t.outputs=[t.dryGain,t.wetGain];var c=tn(tn({},an),n);return t.setAmount(c.amount),t.setDelayTime(c.delayTime),t.setRate(c.rate),t.setDepth(c.depth),t.setFeedback(c.feedback),t.chorusGain.connect(t.leftDelay),t.chorusGain.connect(t.rightDelay),t.leftDelay.connect(t.channelMerger,0,0),t.rightDelay.connect(t.channelMerger,0,1),t.channelMerger.connect(t.feedback),t.channelMerger.connect(t.wetGain),t.feedback.connect(t.leftDelay),t.feedback.connect(t.rightDelay),t.leftLFO.connect(t.leftDelay.getParams().delayTime),t.rightLFO.connect(t.rightDelay.getParams().delayTime),t}return o}(r);function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var On={amount:0,distortion:0},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=44100,n=new Float32Array(t);return n.map((function(n,r){var o=2*r/t-1;return(3+e)*Math.atan(5*Math.sinh(.25*o))/(Math.PI+e*Math.abs(o))}))};const dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=hn(t);if(n){var o=hn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return gn(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bn(this,o),(t=r.call(this,e)).getAmount=function(){return t.wetGain.getGain()},t.getDistortion=function(){return t.distortion},t.setAmount=function(e,n){t._linearFadeUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setDistortion=function(e){t.waveShaper.setCurve(vn(e)),t.distortion=e},t.name="Distortion",t.dryGain=new ge(t.AC),t.waveShaper=new qt(t.AC),t.wetGain=new ge(t.AC),t.distortion=0,t.params={},t.inputs=[t.dryGain,t.waveShaper],t.outputs=[t.dryGain,t.wetGain];var c=pn(pn({},On),n);return t.setAmount(c.amount),t.setDistortion(c.distortion),t.waveShaper.connect(t.wetGain),t}return o}(r);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var En={lowFrequency:320,lowGain:0,highFrequency:3200,highGain:0};const Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Rn(t);if(n){var o=Rn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return An(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Sn(this,o),(t=r.call(this,e)).getLowFrequency=function(){return t.params.lowFrequency.value},t.getLowGain=function(){return t.params.lowGain.value},t.getHighFrequency=function(){return t.params.highFrequency.value},t.getHighGain=function(){return t.params.highGain.value},t.setLowFrequency=function(e,n){return t.low.setFrequency(e,n)},t.setLowGain=function(e,n){return t.low.setGain(e,n)},t.setHighFrequency=function(e,n){return t.high.setFrequency(e,n)},t.setHighGain=function(e,n){return t.high.setGain(e,n)},t.name="EQ2",t.low=new J(t.AC,{type:"lowshelf",frequency:320}),t.high=new J(t.AC,{type:"highshelf",frequency:3200}),t.params={lowFrequency:t.low.getParams().frequency,lowGain:t.low.getParams().gain,highFrequency:t.high.getParams().frequency,highGain:t.high.getParams().gain},t.inputs=[t.low],t.outputs=[t.high];var c=jn(jn({},En),n);return t.setLowFrequency(c.lowFrequency),t.setLowGain(c.lowGain),t.setHighFrequency(c.highFrequency),t.setHighGain(c.highGain),t.low.connect(t.high),t}return o}(r);function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nn={amount:0,delayTime:.2,feedback:.6,tone:4400};const Un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=xn(t);if(n){var o=xn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Mn(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kn(this,o),(t=r.call(this,e)).getAmount=function(){return t.amount},t.getDelayTime=function(){return t.params.delayTime.value},t.getFeedback=function(){return t.params.feedback.value},t.getTone=function(){return t.params.tone.value},t.setAmount=function(e,n){t.amount=e,t._dryWetUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setDelayTime=function(e,n){return t.delay.setDelayTime(e,n)},t.setFeedback=function(e,n){return t.feedbackGain.setGain(e,n)},t.setTone=function(e,n){return t.tone.setFrequency(e,n)},t.name="FeedbackDelay",t.dryGain=new ge(t.AC),t.delay=new pt(t.AC),t.feedbackGain=new ge(t.AC),t.tone=new J(t.AC),t.wetGain=new ge(t.AC),t.amount=0,t.params={delayTime:t.delay.getParams().delayTime,feedback:t.feedbackGain.getParams().gain,tone:t.tone.getParams().frequency},t.inputs=[t.dryGain,t.delay],t.outputs=[t.dryGain,t.wetGain];var c=Tn(Tn({},Nn),n);return t.setAmount(c.amount),t.setDelayTime(c.delayTime),t.setFeedback(c.feedback),t.setTone(c.tone),t.delay.connect(t.feedbackGain),t.feedbackGain.connect(t.tone),t.feedbackGain.connect(t.delay),t.tone.connect(t.wetGain),t}return o}(r);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){Wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e,t){return!t||"object"!==Ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $n={amount:0,delayTime:.01,depth:.0015,feedback:.6666,rate:.3333};const Jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Hn(t);if(n){var o=Hn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Vn(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};zn(this,o),(t=r.call(this,e)).getAmount=function(){return t.wetGain.getGain()},t.getDelayTime=function(){return t.params.delayTime.value},t.getDepth=function(){return t.params.depth.value},t.getFeedback=function(){return t.params.feedback.value},t.getRate=function(){return t.params.rate.value},t.setAmount=function(e,n){t._linearFadeUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setFeedback=function(e,n){return t.feedback.setGain(e,n)},t.setRate=function(e,n){return t.lfo.setRate(e,n)},t.setDepth=function(e,n){return t.lfo.setDepth(e,n)},t.setDelayTime=function(e,n){return t.delay.setDelayTime(e,n)},t.name="Flanger",t.dryGain=new ge(t.AC),t.inputGain=new ge(t.AC),t.delay=new pt(t.AC),t.feedback=new ge(t.AC),t.lfo=new Yt(t.AC,{start:!0}),t.wetGain=new ge(t.AC),t.params={delayTime:t.delay.getParams().delayTime,depth:t.lfo.getParams().depth,feedback:t.feedback.getParams().gain,rate:t.lfo.getParams().rate},t.inputs=[t.dryGain,t.inputGain],t.outputs=[t.dryGain,t.wetGain];var c=In(In({},$n),n);return t.setAmount(c.amount),t.setDelayTime(c.delayTime),t.setFeedback(c.feedback),t.setDepth(c.depth),t.setRate(c.rate),t.inputGain.connect(t.delay),t.inputGain.connect(t.wetGain),t.delay.connect(t.feedback),t.delay.connect(t.wetGain),t.feedback.connect(t.inputGain),t.lfo.connect(t.delay.getParams().delayTime),t}return o}(r);function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){er(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(e,t){return!t||"object"!==Xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cr={threshold:-6,ratio:20,knee:0,attack:.003,release:.01,gain:.75};const ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=or(t);if(n){var o=or(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return rr(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};tr(this,o),(t=r.call(this,e)).getKnee=function(){return t.params.knee.value},t.getThreshold=function(){return t.params.threshold.value},t.getRatio=function(){return t.params.ratio.value},t.getAttack=function(){return t.params.attack.value},t.getRelease=function(){return t.params.release.value},t.getReduction=function(){return t.limiter.reduction},t.getGain=function(){return t.params.gain.value},t.setKnee=function(e,n){return t.limiter.setKnee(e,n)},t.setThreshold=function(e,n){return t.limiter.setThreshold(e,n)},t.setRatio=function(e,n){return t.limiter.setRatio(e,n)},t.setAttack=function(e,n){return t.limiter.setAttack(e,n)},t.setRelease=function(e,n){return t.limiter.setRelease(e,n)},t.setGain=function(e,n){return t.gain.setGain(e,n)},t.name="Limiter",t.limiter=new Ke(t.AC),t.gain=new ge(t.AC),t.params={knee:t.limiter.getParams().knee,threshold:t.limiter.getParams().threshold,ratio:t.limiter.getParams().ratio,attack:t.limiter.getParams().attack,release:t.limiter.getParams().release,gain:t.gain.getParams().gain},t.inputs=[t.limiter],t.outputs=[t.gain];var c=Zn(Zn({},cr),n);return t.setThreshold(c.threshold),t.setRatio(c.ratio),t.setKnee(c.knee),t.setAttack(c.attack),t.setRelease(c.release),t.setGain(c.gain),t.limiter.connect(t.gain),t}return o}(r);function ir(e){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pr(e,t){return(pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e,t){return!t||"object"!==ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mr={amount:0,preDelayTime:.2,leftDelayTime:.2,rightDelayTime:.2,leftFeedback:.6,rightFeedback:.6,tone:4400};const gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=br(t);if(n){var o=br(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return yr(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lr(this,o),(t=r.call(this,e)).getAmount=function(){return t.amount},t.getPreDelayTime=function(){return t.params.preDelayTime.value},t.getLeftDelayTime=function(){return t.params.leftDelayTime.value},t.getRightDelayTime=function(){return t.params.rightDelayTime.value},t.getLeftFeedback=function(){return t.params.leftFeedback.value},t.getRightFeedback=function(){return t.params.rightFeedback.value},t.getTone=function(){return t.params.tone.value},t.setAmount=function(e,n){t.amount=e,t._dryWetUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setPreDelayTime=function(e,n){return t.preDelay.setDelayTime(e,n)},t.setLeftDelayTime=function(e,n){return t.leftDelay.setDelayTime(e,n)},t.setRightDelayTime=function(e,n){return t.rightDelay.setDelayTime(e,n)},t.setLeftFeedback=function(e,n){return t.leftFeedbackGain.setGain(e,n)},t.setRightFeedback=function(e,n){return t.rightFeedbackGain.setGain(e,n)},t.setTone=function(e,n){return t.tone.setFrequency(e,n)},t.name="PingPongDelay",t.dryGain=new ge(t.AC),t.leftDelay=new pt(t.AC),t.preDelay=new pt(t.AC),t.rightDelay=new pt(t.AC),t.leftFeedbackGain=new ge(t.AC),t.rightFeedbackGain=new ge(t.AC),t.channelMerger=new Fe(t.AC),t.tone=new J(t.AC),t.wetGain=new ge(t.AC),t.amount=0,t.params={preDelayTime:t.preDelay.getParams().delayTime,leftDelayTime:t.leftDelay.getParams().delayTime,rightDelayTime:t.rightDelay.getParams().delayTime,leftFeedback:t.leftFeedbackGain.getParams().gain,rightFeedback:t.rightFeedbackGain.getParams().gain,tone:t.tone.getParams().frequency},t.inputs=[t.dryGain,t.leftDelay,t.preDelay],t.outputs=[t.dryGain,t.wetGain];var c=fr(fr({},mr),n);return t.setAmount(c.amount),t.setPreDelayTime(c.preDelayTime),t.setLeftDelayTime(c.leftDelayTime),t.setRightDelayTime(c.rightDelayTime),t.setLeftFeedback(c.leftFeedback),t.setRightFeedback(c.rightFeedback),t.setTone(c.tone),t.preDelay.connect(t.rightDelay),t.leftDelay.connect(t.channelMerger,0,0),t.rightDelay.connect(t.channelMerger,0,1),t.leftDelay.connect(t.leftFeedbackGain),t.leftFeedbackGain.connect(t.rightDelay),t.rightDelay.connect(t.rightFeedbackGain),t.rightFeedbackGain.connect(t.leftDelay),t.channelMerger.connect(t.tone),t.tone.connect(t.wetGain),t}return o}(r);function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){dr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e,t){return!t||"object"!==hr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sr={buffer:null,loop:!1,detune:0,playbackRate:1,start:!1};const _r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Dr(t);if(n){var o=Dr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return jr(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pr(this,o),(t=r.call(this,e)).start=function(){return t.bufferSource.start()},t.stop=function(){return t.bufferSource.stop()},t.getBuffer=function(){return t.bufferSource.buffer},t.getLoop=function(){return t.bufferSource.loop},t.getDetune=function(){return t.params.detune.value},t.getPlaybackRate=function(){return t.params.playbackRate.value},t.setBuffer=function(e){return t.bufferSource.buffer=e},t.setLoop=function(e){return t.bufferSource.loop=e},t.setDetune=function(e,n){return t._timeUpdate(t.params.detune,e,n)},t.setPlaybackRate=function(e,n){return t._timeUpdate(t.params.playbackRate,e,n)},t.name="BufferSource",t.bufferSource=t.AC.createBufferSource(),t.params={detune:t.bufferSource.detune,playbackRate:t.bufferSource.playbackRate},t.inputs=[t.bufferSource],t.outputs=[t.bufferSource];var c=vr(vr({},Sr),n);return t.setBuffer(c.buffer),t.setLoop(c.loop),t.setDetune(c.detune),t.setPlaybackRate(c.playbackRate),c.start&&t.start(),t}return o}(r);function Ar(e){return(Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tr(e,t){return!t||"object"!==Ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cr(e){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kr=function(e){var t=2*e.sampleRate;return e.createBuffer(1,t,e.sampleRate)},Br={white:function(e){for(var t=e.getChannelData(0),n=0;n<t.length;n++)t[n]=2*Math.random()-1;return e},pink:function(e){var t,n,r,o,c,u,i,a=e.getChannelData(0);t=n=r=o=c=u=i=0;for(var f=0;f<a.length;f++){var s=2*Math.random()-1;t=.99886*t+.0555179*s,n=.99332*n+.0750759*s,r=.969*r+.153852*s,o=.8665*o+.3104856*s,c=.55*c+.5329522*s,u=-.7616*u-.016898*s,a[f]=.11*(t+n+r+o+c+u+i+.5362*s),i=.115926*s}return e},brown:function(e){for(var t=e.getChannelData(0),n=0,r=0;r<t.length;r++){var o=2*Math.random()-1;t[r]=4*(n+.02*o)/1.02,n=t[r]/4}return e}},Mr={type:"white",start:!1};const xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Cr(t);if(n){var o=Cr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Tr(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Fr(this,o),(t=r.call(this,e)).start=function(){return t.bufferSource.start()},t.stop=function(){return t.bufferSource.stop()},t.getType=function(){return t.type},t.setType=function(e){if(_.includes(e))if(t.type=e,t.bufferSource.getBuffer())Br[t.type](t.bufferSource.getBuffer());else{var n=kr(t.AC);t.bufferSource.setBuffer(Br[t.type](n))}},t.name="NoiseGenerator",t.bufferSource=new _r(t.AC,{loop:!0}),t.type="white",t.params={},t.inputs=null,t.outputs=[t.bufferSource];var c=Er(Er({},Mr),n);return t.setType(c.type),c.start&&t.start(),t}return o}(r);function Nr(e){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){Qr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zr(e,t){return!t||"object"!==Nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vr={amount:0,buffer:null,normalize:!1};const Hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Kr(t);if(n){var o=Kr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return zr(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ir(this,o),(t=r.call(this,e)).getAmount=function(){return t.amount},t.getBuffer=function(){return t.convolver.getParams().buffer},t.getNormalize=function(){return t.convolver.getParams().normalize},t.setAmount=function(e,n){t.amount=e,t._dryWetUpdate(t.dryGain.getParams().gain,t.wetGain.getParams().gain,e,n)},t.setBuffer=function(e){return t.convolver.setBuffer(e)},t.setNormalize=function(e){return t.convolver.setNormalize(e)},t._generateBuffer=function(){var e=new OfflineAudioContext(2,2.55*44100,44100),n=new xr(e,{start:!0}),r=new xr(e,{start:!0}),o=new Fe(e),c=new ge(e);n.connect(o,0,0),r.connect(o,0,1),o.connect(c),c.connect(e.destination),c.getParams().gain.setValueAtTime(0,e.currentTime),c.getParams().gain.setTargetAtTime(.05,e.currentTime,.01),c.getParams().gain.setTargetAtTime(0,e.currentTime+.01,.5),e.startRendering().then((function(e){return t.setBuffer(e)}))},t.name="Reverb",t.dryGain=new ge(t.AC),t.convolver=new nt(t.AC),t.wetGain=new ge(t.AC),t.amount=0,t.params={},t.inputs=[t.dryGain,t.convolver],t.outputs=[t.dryGain,t.wetGain];var c=Lr(Lr({},Vr),n);return t.setAmount(c.amount),t.setBuffer(c.buffer),t.setNormalize(c.normalize),t.getBuffer()||t._generateBuffer(),t.convolver.connect(t.wetGain),t}return o}(r);function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function to(e,t){return!t||"object"!==$r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function no(e){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ro={waveform:"sine",frequency:440,detune:0,gain:1};const oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=no(t);if(n){var o=no(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return to(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zr(this,o),(t=r.call(this,e)).getWaveform=function(){return t.osc.getType()},t.getFrequency=function(){return t.params.frequency.value},t.getDetune=function(){return t.params.detune.value},t.getGain=function(){return t.params.gain.value},t.setWaveform=function(e){return t.osc.setType(e)},t.setFrequency=function(e,n){return t.osc.setFrequency(e,n)},t.setDetune=function(e,n){return t.osc.setDetune(e,n)},t.setGain=function(e,n){return t.gain.setGain(e,n)},t.name="Osc",t.osc=new Qt(t.AC,{start:!0}),t.gain=new ge(t.AC),t.params={frequency:t.osc.getParams().frequency,detune:t.osc.getParams().detune,gain:t.gain.getParams().gain},t.inputs=null,t.outputs=[t.gain];var c=Xr(Xr({},ro),n);return t.setWaveform(c.waveform),t.setFrequency(c.frequency),t.setDetune(c.detune),t.setGain(c.gain),t.osc.connect(t.gain),t}return o}(r);var co=function(e){return e.forEach((function(e){return e.disconnect()}))};const uo=[function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect(n.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"A > B > C > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(n.getParams().frequency),t.connect(n.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[A + B] > C > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect(r.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[A > B + C] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([t.getParams().frequency,n.getParams().frequency]),t.connect(r.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[[A > B] + [A > C]] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect([n.getParams().frequency,r.getParams().frequency]),n.connect(o),r.connect(o),"[A > B > C] + [A > B > D] => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect(n.getParams().frequency),n.connect(o),r.connect(o),"[A > B > C] + D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(r.getParams().frequency),t.connect(r.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[A + B + C] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect(o),n.connect(r.getParams().frequency),r.connect(o),"[A > B] + [C > D] => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([t.getParams().frequency,n.getParams().frequency,r.getParams().frequency]),t.connect(o),n.connect(o),r.connect(o),"[A > B] + [A > C] + [A > D] => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(t.getParams().frequency),t.connect(o),n.connect(o),r.connect(o),"[A > B] + C + D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect(o),t.connect(o),n.connect(o),r.connect(o),"A + B + C + D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,t.getParams().frequency]),t.connect(n.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[A > A] > B > C > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,n.getParams().frequency]),t.connect(n.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[[A > A] + B] > C > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,r.getParams().frequency]),t.connect(n.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[[A > A] + B > C] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,t.getParams().frequency]),t.connect(r.getParams().frequency),n.connect(r.getParams().frequency),r.connect(o),"[[A > A] > B + C] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,t.getParams().frequency]),t.connect(o),n.connect([n.getParams().frequency,r.getParams().frequency]),r.connect(o),"[A > A] > B + [C > C] > D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,t.getParams().frequency,n.getParams().frequency,r.getParams().frequency]),t.connect(o),n.connect(o),r.connect(o),"[A > A > B] + [A > A > C] + [A > A > D] => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,t.getParams().frequency]),t.connect(o),n.connect(o),r.connect(o),"[A > A > B] + C + D => Out"},function(e,t,n,r,o){return co([e,t,n,r]),e.connect([e.getParams().frequency,o]),t.connect(o),n.connect(o),r.connect(o),"[A > A] + B + C + D => Out"}];function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yo(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bo(e){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mo={algorithm:0,modAFrequency:440,modADetune:0,modAGain:440,modBFrequency:440,modBDetune:0,modBGain:440,modCFrequency:440,modCDetune:0,modCGain:440,modDFrequency:440,modDDetune:0,modDGain:440,gainAttack:0,gainDecay:0,gainSustain:1,gainRelease:0,gainAmount:.75};const go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=bo(t);if(n){var o=bo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return yo(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};lo(this,o),(t=r.call(this,e)).getAlgorithm=function(){return t.algorithm},t.getModAFrequency=function(){return t.params.modAFrequency.value},t.getModADetune=function(){return t.params.modADetune.value},t.getModAGain=function(){return t.params.modAGain.value},t.getModBFrequency=function(){return t.params.modBFrequency.value},t.getModBDetune=function(){return t.params.modBDetune.value},t.getModBGain=function(){return t.params.modBGain.value},t.getModCFrequency=function(){return t.params.modCFrequency.value},t.getModCDetune=function(){return t.params.modCDetune.value},t.getModCGain=function(){return t.params.modCGain.value},t.getModDFrequency=function(){return t.params.modDFrequency.value},t.getModDDetune=function(){return t.params.modDDetune.value},t.getModDGain=function(){return t.params.modDGain.value},t.getGainAttack=function(){return t.gainEnv.getAttack()},t.getGainDecay=function(){return t.gainEnv.getDecay()},t.getGainSustain=function(){return t.gainEnv.getSustain()},t.getGainRelease=function(){return t.gainEnv.getRelease()},t.getGainAmount=function(){return t.gainEnv.getModifier()},t.setAlgorithm=function(e){return uo[e]?(t.algorithm=uo[e](t.modA,t.modB,t.modC,t.modD,t.limiter),t.algorithm):console.error("Invalid algorithm index")},t.setModAFrequency=function(e,n){return t.modA.setFrequency(e,n)},t.setModADetune=function(e,n){return t.modA.setDetune(e,n)},t.setModAGain=function(e,n){return t.modA.setGain(e,n)},t.setModBFrequency=function(e,n){return t.modB.setFrequency(e,n)},t.setModBDetune=function(e,n){return t.modB.setDetune(e,n)},t.setModBGain=function(e,n){return t.modB.setGain(e,n)},t.setModCFrequency=function(e,n){return t.modC.setFrequency(e,n)},t.setModCDetune=function(e,n){return t.modC.setDetune(e,n)},t.setModCGain=function(e,n){return t.modC.setGain(e,n)},t.setModDFrequency=function(e,n){return t.modD.setFrequency(e,n)},t.setModDDetune=function(e,n){return t.modD.setDetune(e,n)},t.setModDGain=function(e,n){return t.modD.setGain(e,n)},t.setGainAttack=function(e){return t.gainEnv.setAttack(e)},t.setGainDecay=function(e){return t.gainEnv.setDecay(e)},t.setGainSustain=function(e){return t.gainEnv.setSustain(e)},t.setGainRelease=function(e){return t.gainEnv.setRelease(e)},t.setGainAmount=function(e){return t.gainEnv.setModifier(e)},t.triggerAttack=function(){return t.gainEnv.triggerAttack()},t.triggerRelease=function(){return t.gainEnv.triggerRelease()},t.triggerStop=function(){return t.gainEnv.triggerStop()},t.name="FMSynth",t.modA=new oo(t.AC),t.modB=new oo(t.AC),t.modC=new oo(t.AC),t.modD=new oo(t.AC),t.limiter=new ur(t.AC),t.gainEnv=new _e(t.AC),t.algorithm=null,t.params={modAFrequency:t.modA.getParams().frequency,modADetune:t.modA.getParams().detune,modAGain:t.modA.getParams().gain,modBFrequency:t.modB.getParams().frequency,modBDetune:t.modB.getParams().detune,modBGain:t.modB.getParams().gain,modCFrequency:t.modC.getParams().frequency,modCDetune:t.modC.getParams().detune,modCGain:t.modC.getParams().gain,modDFrequency:t.modD.getParams().frequency,modDDetune:t.modD.getParams().detune,modDGain:t.modD.getParams().gain},t.inputs=null,t.outputs=[t.gainEnv];var c=fo(fo({},mo),n);return t.setAlgorithm(c.algorithm),t.setModAFrequency(c.modAFrequency),t.setModADetune(c.modADetune),t.setModAGain(c.modAGain),t.setModBFrequency(c.modBFrequency),t.setModBDetune(c.modBDetune),t.setModBGain(c.modBGain),t.setModCFrequency(c.modCFrequency),t.setModCDetune(c.modCDetune),t.setModCGain(c.modCGain),t.setModDFrequency(c.modDFrequency),t.setModDDetune(c.modDDetune),t.setModDGain(c.modDGain),t.setGainAttack(c.gainAttack),t.setGainDecay(c.gainDecay),t.setGainSustain(c.gainSustain),t.setGainRelease(c.gainRelease),t.setGainAmount(c.gainAmount),t.limiter.connect(t.gainEnv),t}return o}(r);function ho(e){return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Do(e,t){return!t||"object"!==ho(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _o={waveform:"sine",frequency:440,detune:0,gainAttack:0,gainDecay:0,gainSustain:1,gainRelease:0,gainAmount:.75};const Ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=So(t);if(n){var o=So(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Do(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wo(this,o),(t=r.call(this,e)).getCurrentNote=function(){return t.currentNote},t.getWaveform=function(){return t.osc.getType()},t.getFrequency=function(){return t.params.frequency.value},t.getDetune=function(){return t.params.detune.value},t.getGainAttack=function(){return t.gainEnv.getAttack()},t.getGainDecay=function(){return t.gainEnv.getDecay()},t.getGainSustain=function(){return t.gainEnv.getSustain()},t.getGainRelease=function(){return t.gainEnv.getRelease()},t.getGainAmount=function(){return t.gainEnv.getModifier()},t.setWaveform=function(e){return t.osc.setType(e)},t.setFrequency=function(e,n){return t.osc.setFrequency(e,n)},t.setDetune=function(e,n){return t.osc.setDetune(e,n)},t.setGainAttack=function(e){return t.gainEnv.setAttack(e)},t.setGainDecay=function(e){return t.gainEnv.setDecay(e)},t.setGainSustain=function(e){return t.gainEnv.setSustain(e)},t.setGainRelease=function(e){return t.gainEnv.setRelease(e)},t.setGainAmount=function(e){return t.gainEnv.setModifier(e)},t.noteOn=function(e){return t._noteOn(e)},t.noteOff=function(e){return t._noteOff(e)},t.noteStop=function(){return t._noteStop()},t._noteOn=function(e){e?(t.currentNote=e,t.osc.setFrequency(U(e)),t.gainEnv.triggerAttack()):console.error("Note must be provided to play")},t._noteOff=function(e){e&&e!==t.currentNote||(t.currentNote=null,t.gainEnv.triggerRelease())},t._noteStop=function(){t.currentNote=null,t.gainEnv.triggerStop()},t.name="Synth",t.osc=new Qt(t.AC,{start:!0}),t.gainEnv=new _e(t.AC),t.currentNote=null,t.params={frequency:t.osc.getParams().frequency,detune:t.osc.getParams().detune,gain:t.gainEnv.getParams().gain},t.inputs=null,t.outputs=[t.gainEnv];var c=vo(vo({},_o),n);return t.setWaveform(c.waveform),t.setFrequency(c.frequency),t.setDetune(c.detune),t.setGainAttack(c.gainAttack),t.setGainDecay(c.gainDecay),t.setGainSustain(c.gainSustain),t.setGainRelease(c.gainRelease),t.setGainAmount(c.gainAmount),t.osc.connect(t.gainEnv),t}return o}(r);function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Co(e,t){return!t||"object"!==Ro(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bo={filterFrequency:2e3,filterQ:0,filterDetune:0,filterGain:0,filterType:"lowpass",filterAttack:0,filterDecay:0,filterSustain:1,filterRelease:0,filterAmount:6e3};const Mo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ko(t);if(n){var o=ko(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Co(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qo(this,o),(t=r.call(this,e,n)).getFilterFrequency=function(){return t.filterEnv.getFrequency()},t.getFilterDetune=function(){return t.filterEnv.getDetune()},t.getFilterQ=function(){return t.filterEnv.getQ()},t.getFilterGain=function(){return t.filterEnv.getGain()},t.getFilterType=function(){return t.filterEnv.getType()},t.getFilterAttack=function(){return t.filterEnv.getAttack()},t.getFilterDecay=function(){return t.filterEnv.getDecay()},t.getFilterSustain=function(){return t.filterEnv.getSustain()},t.getFilterRelease=function(){return t.filterEnv.getRelease()},t.getFilterAmount=function(){return t.filterEnv.getModifier()},t.setFilterFrequency=function(e,n){return t.filterEnv.setFrequency(e,n)},t.setFilterDetune=function(e,n){return t.filterEnv.setDetune(e,n)},t.setFilterQ=function(e,n){return t.filterEnv.setQ(e,n)},t.setFilterGain=function(e,n){return t.filterEnv.setGain(e,n)},t.setFilterType=function(e){return t.filterEnv.setType(e)},t.setFilterAttack=function(e){return t.filterEnv.setAttack(e)},t.setFilterDecay=function(e){return t.filterEnv.setDecay(e)},t.setFilterSustain=function(e){return t.filterEnv.setSustain(e)},t.setFilterRelease=function(e){return t.filterEnv.setRelease(e)},t.setFilterAmount=function(e){return t.filterEnv.setModifier(e)},t.noteOn=function(e){t._noteOn(e),t.filterEnv.triggerAttack()},t.noteOff=function(e){e&&e!==t.currentNote||(t._noteOff(e),t.filterEnv.triggerRelease())},t.noteStop=function(){t._noteStop(),t.filterEnv.triggerStop()},t.name="MonoSynth",t.filterEnv=new ue(t.AC),t.params=Go(Go({},t.params),{},{filterFrequency:t.filterEnv.getParams().frequency,filterQ:t.filterEnv.getParams().q,filterDetune:t.filterEnv.getParams().detune,filterGain:t.filterEnv.getParams().gain}),t.inputs=null,t.outputs=[t.filterEnv];var c=Go(Go({},Bo),n);return t.setFilterType(c.filterType),t.setFilterFrequency(c.filterFrequency),t.setFilterQ(c.filterQ),t.setFilterDetune(c.filterDetune),t.setFilterGain(c.filterGain),t.setFilterAttack(c.filterAttack),t.setFilterDecay(c.filterDecay),t.setFilterSustain(c.filterSustain),t.setFilterRelease(c.filterRelease),t.setFilterAmount(c.filterAmount),t.gainEnv.connect(t.filterEnv),t}return o}(Ao);function xo(e){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){Lo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Io(e,t){return(Io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wo(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ko={polyphony:8,waveform:"sine",frequency:440,detune:0,gainAttack:0,gainDecay:0,gainSustain:1,gainRelease:0,gainAmount:.15,filterFrequency:2e3,filterQ:0,filterDetune:0,filterGain:0,filterType:"lowpass",filterAttack:0,filterDecay:0,filterSustain:1,filterRelease:0,filterAmount:6e3};const Vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Io(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=zo(t);if(n){var o=zo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Wo(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Qo(this,o),(t=r.call(this,e)).getPolyphony=function(){return t.polyphony},t.getWaveform=function(){return t.voices[0].getWaveform()},t.getDetune=function(){return t.voices[0].getDetune()},t.getGainAttack=function(){return t.voices[0].getGainAttack()},t.getGainDecay=function(){return t.voices[0].getGainDecay()},t.getGainSustain=function(){return t.voices[0].getGainSustain()},t.getGainRelease=function(){return t.voices[0].getGainRelease()},t.getGainAmount=function(){return t.voices[0].getGainAmount()},t.getFilterFrequency=function(){return t.voices[0].getFilterFrequency()},t.getFilterDetune=function(){return t.voices[0].getFilterDetune()},t.getFilterQ=function(){return t.voices[0].getFilterQ()},t.getFilterGain=function(){return t.voices[0].getFilterGain()},t.getFilterType=function(){return t.voices[0].getFilterType()},t.getFilterAttack=function(){return t.voices[0].getFilterAttack()},t.getFilterDecay=function(){return t.voices[0].getFilterDecay()},t.getFilterSustain=function(){return t.voices[0].getFilterSustain()},t.getFilterRelease=function(){return t.voices[0].getFilterRelease()},t.getFilterAmount=function(){return t.voices[0].getFilterAmount()},t.setPolyphony=function(e){return t.polyphony=E(e,1,8)},t.setWaveform=function(e){return t.voices.forEach((function(t){return t.setWaveform(e)}))},t.setDetune=function(e,n){return t.voices.forEach((function(t){return t.setDetune(e,n)}))},t.setGainAttack=function(e){return t.voices.forEach((function(t){return t.setGainAttack(e)}))},t.setGainDecay=function(e){return t.voices.forEach((function(t){return t.setGainDecay(e)}))},t.setGainSustain=function(e){return t.voices.forEach((function(t){return t.setGainSustain(e)}))},t.setGainRelease=function(e){return t.voices.forEach((function(t){return t.setGainRelease(e)}))},t.setGainAmount=function(e){return t.voices.forEach((function(t){return t.setGainAmount(e)}))},t.setFilterFrequency=function(e,n){return t.voices.forEach((function(t){return t.setFilterFrequency(e,n)}))},t.setFilterDetune=function(e,n){return t.voices.forEach((function(t){return t.setFilterDetune(e,n)}))},t.setFilterQ=function(e,n){return t.voices.forEach((function(t){return t.setFilterQ(e,n)}))},t.setFilterGain=function(e,n){return t.voices.forEach((function(t){return t.setFilterGain(e,n)}))},t.setFilterType=function(e){return t.voices.forEach((function(t){return t.setFilterType(e)}))},t.setFilterAttack=function(e){return t.voices.forEach((function(t){return t.setFilterAttack(e)}))},t.setFilterDecay=function(e){return t.voices.forEach((function(t){return t.setFilterDecay(e)}))},t.setFilterSustain=function(e){return t.voices.forEach((function(t){return t.setFilterSustain(e)}))},t.setFilterRelease=function(e){return t.voices.forEach((function(t){return t.setFilterRelease(e)}))},t.setFilterAmount=function(e){return t.voices.forEach((function(t){return t.setFilterAmount(e)}))},t.noteOn=function(e){if(Array.isArray(e))e.forEach((function(e){return t.noteOn(e)}));else{if(t.voices[t.voicePos].getCurrentNote()){var n=t.voicePos;for(t._incrementVoicePos();t.voicePos!==n&&t.voices[t.voicePos].currentNote;)t._incrementVoicePos();t._voiceNoteOn(t.voices[t.voicePos],e)}else t._voiceNoteOn(t.voices[t.voicePos],e);t._incrementVoicePos()}},t.noteOff=function(e){return e?Array.isArray(e)?e.forEach((function(e){return t.noteOff(e)})):void t.voices.filter((function(t){return t.getCurrentNote()===e})).forEach((function(n){return t._voiceNoteOff(n,e)})):t.voices.forEach((function(e){return t._voiceNoteOff(e)}))},t.noteStop=function(e){return e?Array.isArray(e)?e.forEach((function(e){return t.noteStop(e)})):void t.voices.filter((function(t){return t.getCurrentNote()===e})).forEach((function(e){return t._voiceNoteStop(e)})):t.voices.forEach((function(e){return t._voiceNoteStop(e)}))},t._resetVoicePos=function(){return t.voicePos=0},t._incrementVoicePos=function(){return t.voicePos=(t.voicePos+1)%t.polyphony},t._voiceNoteOn=function(e,t){return e.noteOn(t)},t._voiceNoteOff=function(e,t){return e.noteOff(t)},t._voiceNoteStop=function(e){return e.noteStop()},t.name="PolySynth",t.voices=Array(8).fill(0).map((function(e){return new Mo(t.AC)})),t.limiter=new ur(t.AC),t.polyphony=8,t.voicePos=0,t.params={frequency:t.voices.map((function(e){return e.getParams().frequency})),detune:t.voices.map((function(e){return e.getParams().detune})),gain:t.voices.map((function(e){return e.getParams().gain})),filterFrequency:t.voices.map((function(e){return e.getParams().filterFrequency})),filterQ:t.voices.map((function(e){return e.getParams().filterQ})),filterDetune:t.voices.map((function(e){return e.getParams().filterDetune})),filterGain:t.voices.map((function(e){return e.getParams().filterGain}))},t.inputs=null,t.outputs=[t.limiter];var c=Uo(Uo({},Ko),n);return t.setPolyphony(c.polyphony),t.voices.forEach((function(e){e.setWaveform(c.waveform),e.setFrequency(c.frequency),e.setDetune(c.detune),e.setGainAttack(c.gainAttack),e.setGainDecay(c.gainDecay),e.setGainSustain(c.gainSustain),e.setGainRelease(c.gainRelease),e.setGainAmount(c.gainAmount),e.setFilterType(c.filterType),e.setFilterFrequency(c.filterFrequency),e.setFilterQ(c.filterQ),e.setFilterDetune(c.filterDetune),e.setFilterGain(c.filterGain),e.setFilterAttack(c.filterAttack),e.setFilterDecay(c.filterDecay),e.setFilterSustain(c.filterSustain),e.setFilterRelease(c.filterRelease),e.setFilterAmount(c.filterAmount),e.connect(t.limiter)})),t}return o}(r);function Ho(e){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ec(e,t){return!t||"object"!==Ho(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tc(e){return(tc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nc={modulatorFrequency:440,modulatorDetune:0,modulatorDepth:440,carrierFrequency:440,carrierDetune:0,gainAttack:0,gainDecay:0,gainSustain:1,gainRelease:0,gainAmount:.75};const rc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=tc(t);if(n){var o=tc(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ec(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Yo(this,o),(t=r.call(this,e)).getModulatorFrequency=function(){return t.params.modulatorFrequency.value},t.getModulatorDetune=function(){return t.params.modulatorDetune.value},t.getModulatorDepth=function(){return t.params.modulatorDepth.value},t.getCarrierFrequency=function(){return t.params.carrierFrequency.value},t.getCarrierDetune=function(){return t.params.carrierDetune.value},t.getGainAttack=function(){return t.carrier.getGainAttack()},t.getGainDecay=function(){return t.carrier.getGainDecay()},t.getGainSustain=function(){return t.carrier.getGainSustain()},t.getGainRelease=function(){return t.carrier.getGainRelease()},t.getGainAmount=function(){return t.carrier.getGainAmount()},t.setModulatorFrequency=function(e,n){return t.modulator.setFrequency(e,n)},t.setModulatorDetune=function(e,n){return t.modulator.setDetune(e,n)},t.setModulatorDepth=function(e,n){return t.modulator.setGain(e,n)},t.setCarrierFrequency=function(e,n){return t.carrier.setFrequency(e,n)},t.setCarrierDetune=function(e,n){return t.carrier.setDetune(e,n)},t.setGainAttack=function(e){return t.carrier.setGainAttack(e)},t.setGainDecay=function(e){return t.carrier.setGainDecay(e)},t.setGainSustain=function(e){return t.carrier.setGainSustain(e)},t.setGainRelease=function(e){return t.carrier.setGainRelease(e)},t.setGainAmount=function(e){return t.carrier.setGainAmount(e)},t.noteOn=function(e){return t.carrier.noteOn(e)},t.noteOff=function(e){return t.carrier.noteOff(e)},t.noteStop=function(){return t.carrier.noteStop()},t.name="SimpleFMSynth",t.modulator=new oo(t.AC),t.carrier=new Ao(t.AC),t.params={modulatorFrequency:t.modulator.getParams().frequency,modulatorDetune:t.modulator.getParams().detune,modulatorDepth:t.modulator.getParams().gain,carrierFrequency:t.carrier.getParams().frequency,carrierDetune:t.carrier.getParams().detune,carrierGain:t.carrier.getParams().gain},t.input=null,t.outputs=[t.carrier];var c=Jo(Jo({},nc),n);return t.setModulatorFrequency(c.modulatorFrequency),t.setModulatorDetune(c.modulatorDetune),t.setModulatorDepth(c.modulatorDepth),t.setCarrierFrequency(c.carrierFrequency),t.setCarrierDetune(c.carrierDetune),t.setGainAttack(c.gainAttack),t.setGainDecay(c.gainDecay),t.setGainSustain(c.gainSustain),t.setGainRelease(c.gainRelease),t.setGainAmount(c.gainAmount),t.modulator.connect(t.params.carrierFrequency),t}return o}(r);function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){ic(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ac(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fc(e,t){return(fc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sc(e,t){return!t||"object"!==oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pc={gain:1,start:!1};const yc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fc(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=lc(t);if(n){var o=lc(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return sc(this,e)});function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ac(this,o),(t=r.call(this,e)).start=function(){return t.osc.start()},t.stop=function(){return t.osc.stop()},t.getGain=function(){return t.params.gain.value},t.setGain=function(e,n){return t.gain.setGain(e,n)},t.name="SignalGenerator",t.osc=new Qt(t.AC),t.gain=new ge(t.AC),t.waveshaper=new qt(t.AC,{curve:new Float32Array(44100).fill(1)}),t.params={gain:t.gain.getParams().gain},t.inputs=null,t.outputs=[t.gain];var c=uc(uc({},pc),n);return t.setGain(c.gain),t.osc.connect(t.waveshaper),t.waveshaper.connect(t.gain),c.start&&t.start(),t}return o}(r);function bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(n),!0).forEach((function(t){gc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Oc={octave:4,velocity:127,onPress:function(){},onRelease:function(){}};const vc=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hc(this,e),this.on=function(){window.addEventListener("keydown",t._keydown),window.addEventListener("keyup",t._keyup)},this.off=function(){window.removeEventListener("keydown",t._keydown),window.removeEventListener("keyup",t._keyup)},this._keydown=function(e){if(!e.repeat){switch(e.key){case"z":return t._octaveDown();case"x":return t._octaveUp();case"c":return t._velocityDown();case"v":return t._velocityUp()}var n=M(e.key,t.octave);n&&t.onPress(n,e)}},this._keyup=function(e){var n=M(e.key,t.octave);n&&t.onRelease(n,e)},this._octaveDown=function(){t.octave>1&&t.octave--},this._octaveUp=function(){t.octave<7&&t.octave++},this._velocityDown=function(){},this._velocityUp=function(){},this.name="Keyboard";var r=mc(mc({},Oc),n);this.octave=r.octave,this.velocity=r.octave,this.onPress=r.onPress,this.onRelease=r.onRelease};function dc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const Pc=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A4";dc(this,e),this.getNote=function(){return t.note},this.getOctave=function(){return t.octave},this.getFrequency=function(){return t.frequency},this.get=function(e){switch(e){case"note":return t.note;case"octave":return t.octave;case"frequency":return t.frequency;default:return"".concat(t.note).concat(t.octave)}},this.set=function(e){var n="number"==typeof e?x(e):e,r=B(n);if(!r)return console.error("Invalid note value");t.note=r.note,t.octave=r.octave,t._updateMidi(),t._updateFrequency()},this.setNote=function(e){t.note=e,t._updateMidi(),t._updateFrequency()},this.setOctave=function(e){t.octave=E(e,0,9),t._updateMidi(),t._updateFrequency()},this.transpose=function(e){if(0!==e){var n=N(t.get());t.set(E(n+e,12,120))}},this._updateFrequency=function(){return t.frequency=U("".concat(t.note).concat(t.octave))},this._updateMidi=function(){return t.midi=N("".concat(t.note).concat(t.octave))},this.set(n)};return t})()}));